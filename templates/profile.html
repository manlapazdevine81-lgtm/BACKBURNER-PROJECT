{% extends "base.html" %}
{% block content %}

<div class="profile-container">

  <!-- LEFT BOX -->
  <div class="glass-box separate-box">
    <h2 class="welcome-text">Welcome,<br>{{ user }}</h2>

    <h3 class="subtitle">Add New Task</h3>

    <form method="POST">
      <div class="field">
        <input type="text" name="task" placeholder="Task name" required>
      </div>

      <div class="field">
        <select name="category">
          <option value="School">School</option>
          <option value="Personal">Personal</option>
          <option value="Work">Work</option>
        </select>
      </div>

      <div class="field">
        <input type="date" name="due_date">
      </div>

      <button class="form-btn" type="submit">Add Task</button>
    </form>
  </div>

  <!-- RIGHT BOX -->
  <div class="glass-box separate-box">
    <h3 class="subtitle">Your Tasks</h3>

    <div class="progress-container">
      <p>Overall Progress</p>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress }}%;"></div>
      </div>
      <p class="progress-text">{{ progress }}% completed</p>
    </div>

    {% if tasks %}
      <ul class="task-list">
        {% for t in tasks %}
          <li>
            {% if t['completed'] %}
              <s>{{ t['name'] }}</s>
            {% else %}
              {{ t['name'] }}
            {% endif %}
            — {{ t['category'] }} — {{ t['due_date'] }}

            {% if not t['completed'] %}
              <a class="task-action complete" href="{{ url_for('complete_task', task_id=t['id']) }}">Complete</a>
            {% endif %}

            <a class="task-action delete" href="{{ url_for('delete_task', task_id=t['id']) }}">Delete</a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="empty-msg">No tasks yet.</p>
    {% endif %}
  </div>

</div>

{% endblock %}
