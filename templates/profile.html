{% extends "base.html" %}
{% block content %}

<<<<<<< HEAD
<div class="profile-layout">

    <!-- LEFT SIDE — welcome + quote + add task -->
    <div class="glass-box small-box left-box">
        <h2 class="title">Welcome, {{ user }}</h2>
        <p class="quote">"Stay focused and never give up! Every task completed is progress."</p>

        <h3>Add New Task</h3>
        <form method="POST">
            <div class="field">
                <input type="text" name="task" placeholder="Task name" required>
            </div>
            <div class="field">
                <select name="category">
                    <option value="School">School</option>
                    <option value="Personal">Personal</option>
                    <option value="Work">Work</option>
                </select>
            </div>
            <div class="field">
                <input type="date" name="due_date">
            </div>
            <button class="form-btn" type="submit">Add Task</button>
        </form>

        <!-- Display user’s added tasks -->
        <h3 style="margin-top: 20px;">Your Tasks</h3>
        {% if tasks %}
            <ul class="task-list" id="taskList">
                {% for t in tasks %}
                    <li class="{% if t['completed'] %}completed-task{% endif %}">
                        {{ t['name'] }} — {{ t['category'] }} — {{ t['due_date'] }}
                        {% if not t['completed'] %}
                            <a class="task-btn complete" href="{{ url_for('complete_task', task_id=t['id']) }}">Complete</a>
                        {% endif %}
                        <a class="task-btn delete" href="{{ url_for('delete_task', task_id=t['id']) }}">Delete</a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No tasks added yet.</p>
        {% endif %}
    </div>

    <!-- RIGHT SIDE — task chart -->
    <div class="glass-box right-box">
        <h3>Your Tasks Overview</h3>

        <!-- Donut chart container -->
        <div class="chart-area" style="width: 250px; height: 250px; margin: auto;">
            <canvas id="taskChart"></canvas>
        </div>

    </div>
</div>

<!-- Chart.js library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Donut chart script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('taskChart').getContext('2d');
    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Completed', 'Pending'],
            datasets: [{
                data: [completed, pending],
                backgroundColor: ['#4CAF50', '#FF9800'],
                borderColor: ['#45a049', '#F57C00'],
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
})
</script>
<style>
/* Optional: make quote stand out */
.quote {
    font-style: italic;
    color: #555;
    margin: 10px 0 20px 0;
}
</style>

=======
<div class="profile-container">

  <!-- LEFT BOX -->
  <div class="glass-box separate-box">
    <h2 class="welcome-text">Welcome,<br>{{ user }}</h2>

    <h3 class="subtitle">Add New Task</h3>

    <form method="POST">
      <div class="field">
        <input type="text" name="task" placeholder="Task name" required>
      </div>

      <div class="field">
        <select name="category">
          <option value="School">School</option>
          <option value="Personal">Personal</option>
          <option value="Work">Work</option>
        </select>
      </div>

      <div class="field">
        <input type="date" name="due_date">
      </div>

      <button class="form-btn" type="submit">Add Task</button>
    </form>
  </div>

  <!-- RIGHT BOX -->
  <div class="glass-box separate-box">
    <h3 class="subtitle">Your Tasks</h3>

    <div class="progress-container">
      <p>Overall Progress</p>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {{ progress }}%;"></div>
      </div>
      <p class="progress-text">{{ progress }}% completed</p>
    </div>

    {% if tasks %}
      <ul class="task-list">
        {% for t in tasks %}
          <li>
            {% if t['completed'] %}
              <s>{{ t['name'] }}</s>
            {% else %}
              {{ t['name'] }}
            {% endif %}
            — {{ t['category'] }} — {{ t['due_date'] }}

            {% if not t['completed'] %}
              <a class="task-action complete" href="{{ url_for('complete_task', task_id=t['id']) }}">Complete</a>
            {% endif %}

            <a class="task-action delete" href="{{ url_for('delete_task', task_id=t['id']) }}">Delete</a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="empty-msg">No tasks yet.</p>
    {% endif %}
  </div>

</div>

>>>>>>> 2e34dd1f66853ddd22825e18f7137cb590edc82e
{% endblock %}
